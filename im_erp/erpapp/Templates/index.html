{% extends "base.html" %}
{% block title %}SmartRnD - Overview{% endblock title %}
{% block content %}
    <style>
    /* Fixes a bug where collapsed item doesn't show content for more than a
     second */
    .collapse.show {
        visibility: visible;
    }

    </style>
<!-- Main Content -->
<div class="col-8">
    <div class="accordion" id="accordionExample">
        <!-- Employee Table -->
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
                        aria-expanded="true" aria-controls="collapseOne">
                    <h4>Employee</h4>
                </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
                 data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    <div class="table-responsive">
                        <table id="emlployeedatatable" class="table table-striped table-bordered" width="100%">
                            <thead>
                            <tr>
                                <th class="col-sm-1">ID</th>
                                <th class="col-sm-2">First Name</th>
                                <th class="col-sm-2">Last Name</th>
                                <th class="col-sm-2">Type of Employment</th>
                                <th class="col-sm-1">Max. Capacity</th>
                                <th class="col-sm-2">Hiring Date</th>
                                <th class="col-sm-2">Expiration Date</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for employee in employees %}
                            <tr>
                                <td>{{ employee.id }}</td>
                                <td>{{ employee.firstname }}</td>
                                <td>{{ employee.lastname }}</td>
                                <td>{{ employee.type }}</td>
                                <td>{{ employee.capacity }}</td>
                                <td>{{ employee.hiring_date }}</td>
                                <td>{{ employee.expiration_date }}</td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- Project Table -->
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    <h4>Project</h4>
                </button>
            </h2>
            <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                 data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    <table id="projectsdatatable" class="table table-striped table-bordered" width="100%">
                        <thead>
                        <tr>
                            <th class="col-sm-1">ID</th>
                            <th class="col-sm-3">Title</th>
                            <th class="col-sm-4">Description</th>
                            <th class="col-sm-1">Start Date</th>
                            <th class="col-sm-1">Duration (in months)</th>
                            <th class="col-sm-1">End Date</th>
                            <th class="col-sm-1">Ressources</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for project in projects %}
                        <tr>
                            <td>{{ project.id }}</td>
                            <td>{{ project.title }}</td>
                            <td>{{ project.description }}</td>
                            <td>{{ project.begin }}</td>
                            <td>{{ project.duration }}</td>
                            <td>{{ project.end }}</td>
                            <td>{{ project.ressources }}</td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- Position Table -->
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingThree">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    <h4>Position</h4>
                </button>
            </h2>
            <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                 data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    <table id="positionsdatatable" class="table table-striped table-bordered" width="100%">
                        <thead>
                        <tr>
                            <th class="col-sm-1">ID</th>
                            <th class="col-sm-3">Title</th>
                            <th class="col-sm-7">Description</th>
                            <th class="col-sm-1">Ressources</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for position in positions %}
                        <tr>
                            <td>{{ position.id }}</td>
                            <td>{{ position.title }}</td>
                            <td>{{ position.description }}</td>
                            <td>{{ position.ressources }}</td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- Chair Table -->
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingFour">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                    <h4>Chair</h4>
                </button>
            </h2>
            <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour"
                 data-bs-parent="#accordionExample">
                <div class="accordion-body">
                    <table id="chairsdatatable" class="table table-striped table-bordered" width="100%">
                        <thead>
                        <tr>
                            <th class="col-sm-1">ID</th>
                            <th class="col-sm-3">Title</th>
                            <th class="col-sm-6">Description</th>
                            <th class="col-sm-1">Rotation</th>
                            <th class="col-sm-1">Requirements</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for chair in chairs %}
                        <tr>
                            <td>{{ chair.id }}</td>
                            <td>{{ chair.title }}</td>
                            <td>{{ chair.description }}</td>
                            <td>{{ chair.rotation }}</td>
                            <td>{{ chair.requirement }}</td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Spacing -->
<div class="col-1">

</div>
<!-- Sidebar -->
<div class="col-3">
    <div class="row">
        <h4>Warning(s):</h4>
        <!-- Loop thorugh project workloads and check if it's too big -->
        {% for project_info in project_infos %}
        {% if project_info.0 > project_info.1 %}
        <div class="alert alert-danger" role="alert">
            {{ project_info.2 }} is currently using too many ressources! ({{ project_info.3 }}%)
        </div>
        {% endif %}
        {% endfor %}
        <!-- Loop thorugh project workloads and check if it's too big -->
        {% for employee_info in employee_infos %}
        {% if employee_info.1 > employee_info.2 %}
        <div class="alert alert-danger" role="alert">
            {{ employee_info.0 }} is currently working too many hours! ({{ employee_info.3 }}%)
        </div>
        {% endif %}
        {% endfor %}
    </div>
    <div class="row">
        <h4>Recommendation(s):</h4>
        <div class="alert alert-success" role="alert">
            Yet to be implemented
        </div>
    </div>
</div>
{% endblock content %}